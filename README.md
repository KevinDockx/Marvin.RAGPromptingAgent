# Marvin.RAGPromptingAgent
This is an example AI agent that uses RAG (retrieval-augmented generation) prompting to ensure that any code that's generated by your questions to GitHub Copilot will follow your own set of coding guidelines.  As an example, I read out a file with code samples and guidelines from this repository to use as coding guidelines. 

## Steps to run this
1) Decide on how to run this service.  It needs to be accessible over the internet to work.  You can publish it to your own server, to a cloud service, or use a dev tunnel straight from Visual Studio.  Note down the base address where you're running the service from, for example something along the lines of "https://bf2kb7jj-7026.euw.devtunnels.ms".  I'll refer to this as `baseServiceURI` in the explanation below.
2) Create a GitHub app: https://docs.github.com/en/apps/creating-github-apps/registering-a-github-app/registering-a-github-app
	- Note down the name and use it as value for the `gitHubAppName` constant in the codebase
	- The callback URL must be set to `baseServiceURI/authentication-callback` (can be set via the "General" menu option on your app page)
	- The Copilot Agent Definition URL must be set to `baseServiceURI/incoming-copilot-message` (can be set via the "Copilot" menu option on your app page)
	- Give your GitHub app permissions to (can be set via the "Permissions & events" menu option on your app page): 
		- Repository permissions: read-only access to "Contents" so repository contents can be read.   
		- Account permissions: read-only access to "Copilot Chat" and "Copilot Editor Context", so your app can integrate with Copilot.
3) Change the constants in code starting with "guideline" to wherever your own coding guidelines can be found.  
```
const string guidelineRepositoryOwner = "KevinDockx";
const string guidelineRepositoryName = "Marvin.RAGPromptingAgent";
const string guidelineRepositoryBranch = "main";
const string guidelineFilePath = "CodingGuidelinesByExample.txt";
```
4) Deploy (if you're using your own server or a cloud service) or run (if you're using a dev tunnel) the service, and install the agent.  You can find the install button on the "Install App" menu option on your app page.

From this moment on, you can refer to the agent via `@the-name-you-have-chosen-for-your-app`.  You can use this in GitHub Copilot on GitHub, from the GitHub chat window in Visual Studio, and so on.

There's no need to reinstall this agent when you make changes to the service.  Simply redeploying/running the service is sufficient.

Enjoy! :-)
